&emsp;&emsp;区块链应用落地是当前区块链从业者最关心的话题。目前来看，跨境支付、溯源、数据存证、供应链金融是最有可能进入落地实用的行业。其中，区块链溯源应用的商业逻辑最为清晰，已有大批互联网巨头和创业公司入局。包括：京东，百度，阿里巴巴等。
&emsp;&emsp;目前互联网上关于区块链溯源的新闻和资料繁多细碎，作为一个区块链从业人员，我最关心三个问题：
- **区块链技术在溯源系统中到底有什么用？**
- **如何设计溯源系统的架构？**
- **作为程序员，如何在区块链溯源系统中找到自己的位置？**

&emsp;&emsp;通过检索资料，我在中国信通院官网上找到一份由“可信区块链推进计划”发布的“区块链溯源应用白皮书”。依托此白皮书，解决我对区块链溯源行业的疑问。
&emsp;&emsp;白皮书新闻链接（PDF版白皮书在新闻最下方）：
http://www.caict.ac.cn/kxyj/qwfb/bps/201810/t20181019_187262.htm

&emsp;&emsp;下面将围绕三个问题对白皮书中的相关内容进行摘要和分析。
#一、区块链技术在溯源系统中到底有什么用？
> “根据商务部标书，“十三五（2020年末），争取让肉类蔬菜流通追溯系统覆盖到所有百万人口以上城市，并覆盖肉类、禽畜、水果、水产品、食用菌、豆制品定各类食品药品。而鉴于我国目前愈演愈烈的产品安全现状，未来300个地级市也将启动溯源认证的建设并规划追溯体系认证的相关资质””

> “（1）技术方面，通过区块链为溯源平台提供了很好的技术基础，保障了数据的真实可追溯；
（2）应用方面，智能合约在引用层面会成为帮助解决溯源的关键问题，提供更加有价值的信息和服务；
（3）生态层面，区块链技术可以真正打造多中心、按劳分配、价值共享、利益公平分配的自治价值溯源体系。”

前文提到，区块链溯源应用的商业逻辑最为清晰。此商业逻辑可以总结为3点：
1. **溯源行业有真实市场需求**。十九大报告指出：我国社会主要矛盾已经转化为人民日益增长的美好生活需要和不平衡不充分的发展之间的矛盾。生活水平的提高带来了对商品质量更高的要求，人们在挑选商品的时候不仅关注商品的外观质量，还关注商品的原产地、加工过程等内在质量，这为商品溯源行业带来了巨大的市场空间。目前在生鲜超市中，可以看到大量提供了溯源功能的肉、蛋、奶、蔬菜等产品。通过扫描产品上的二维码，即可查看产品的生产日期、生产地点、加工地点等产品全流程的信息。在电子设备及其它产品中，防伪溯源功能也逐渐成为商品的标配功能。未来随着人民生活水平的进一步提高，溯源功能将会向着深入化、定制化的方向发展，产生更大的市场空间。

2. **溯源行业有急需解决的痛点**。溯源行业的重大痛点是数据造假问题。在现有的溯源场景中，商品在整个生命周期中涉及多个不同机构和不同流程，如何保证溯源信息的可靠性是很难解决的问题。一方面，很难保证各方提供的数据是真实的；另一方面，无论由哪一方负责存储溯源信息，都将面临数据窜改的嫌疑。特别是当发生质量纠纷时，传统的基于中心化数据库的溯源系统很难提供有力的溯源证据。

3. **区块链技术能解决溯源行业的痛点**。区块链技术的核心优势是能够在去中介的条件下实现低成本的信任关系。通过将溯源信息保存在区块链账本中，商品生命周期中的各个参与方都将作为区块链节点共同维护存储溯源信息的账本，保证溯源信息一旦上链，就是不可篡改、不可伪造、不可抵赖的。在商品参与方、消费者和监管机构之间形成具有较高公信力的溯源机制，解决数据造假的核心痛点。

#二、如何设计溯源系统的架构？
![图1 区块链溯源模型（基于白皮书图片扩展）](https://upload-images.jianshu.io/upload_images/4794066-bb59a39d64e4d3b7.JPG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
&emsp;&emsp;图1介绍了区块链溯源应用的模型。
- **溯源平台**可以简单理解为一种基于区块链的高可靠性、分布式数据库，主要负责提供数据的存储、查询及日志保存等基础业务。
- **业务系统**是指针对数据生产方的多种数据交互渠道，使商品生命周期中的各个参与方（即溯源系统中的数据生产方）能够完成数据同步、数据上链、数据查看等核心功能。
- **溯源查询**是指针对消费者的溯源终端程序。为了增加易用性，通常需要提供网站、移动APP、微信小程序等多类型应用。此类程序并不关心数据存放在何处（中心化数据库或区块链账本），只需要提供可访问数据接口即可。
- **其他第三方程序**通常是指其他对溯源数据有需求的实体。例如监管机构、数据分析机构等等。针对此类机构，需要提供多种数据版本，例如区块链原始账本，基于区块链浏览器的交易查看，基于专用工具的数据溯源和审计。
![图2 溯源应用的总体架构图（来自白皮书）](https://upload-images.jianshu.io/upload_images/4794066-469b03b9d4b9a4b7.JPG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
&emsp;&emsp;图2比较清晰的说明了区块链溯源系统的技术架构。可以看出，区块链技术只在“基础层”和“核心层”有重要作用。在其他层级主要依托于传统成熟的IT技术。所以，可以认为区块链技术只是对传统溯源业务的完善和补充，而不是所谓的“革命”。
![图3 畜牧业区块链溯源业务流程（来自白皮书）](https://upload-images.jianshu.io/upload_images/4794066-c662bf8f38e47c4f.JPG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
&emsp;&emsp;图3比较清晰的介绍了区块链溯源系统中各个模块的职责定位。
- **智能终端模块**负责溯源基础数据的生成和采集。通过采用智能设备，能够实现数据的自动生成和自动发送，避免人工采集可能出现的数据伪造现象。这里的核心技术是物联网技术。
- **存证平台模块**负责溯源系统中核心业务功能，不仅包括数据的存储和查阅，还包含用户管理、资源管理等配套功能。这里的核心技术是溯源全流程业务的有效组织。
- **“镜链”模块**是此方案中基于区块链的可信溯源平台，主要负责数据的存储、查询等基础性功能。这里的核心技术是底层区块链系统的性能和稳定性。
![图4 天水链苹区块链溯源图（来自白皮书）](https://upload-images.jianshu.io/upload_images/4794066-aa4184b48132753e.JPG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
&emsp;&emsp;图4的有趣之处在于解决了链下数据的可靠性（苹果上的二维码）。在之前的一段时间，区块链溯源的反对者一个主要观点是“区块链技术无法保证上链数据的真实性”。这种说法正确，但是没有意义，因为没有一种技术能够解决所有问题。
&emsp;&emsp;区块链技术的核心优势就是在于解决了溯源信息存储和查询的可信难题。溯源信息本身的真实性可以利用其他技术解决，如图4所示。通过将携带身份信息的二维码直接打印在苹果表皮，能够使苹果在整个生命周期（生长、销售、食用）具有唯一的ID。通过将ID信息存储在区块链上，就能够保证ID信息不可篡改、不可伪造。两者相结合，就能同时解决溯源信息的真实性和溯源信息的可靠性。
![图5 区块链冷链溯源公共服务平台（来自白皮书）](https://upload-images.jianshu.io/upload_images/4794066-4324ed9d680a2742.JPG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
&emsp;&emsp;图5比较详细的介绍了食品溯源涉及的各项活动。可以看到，溯源信息不仅来自于食品生产、运输、销售等主要流程，还包括质量检验、货物转移等细碎、繁琐的中间环节。因此，溯源系统的设计开发一定要依托于具体的溯源业务。


#三、作为程序员，如何在区块链溯源系统中找到自己的位置？
&emsp;&emsp;通过阅读第二部分介绍的区块链架构，可以了解区块链溯源系统是一个复杂工程。区块链技术是其中核心技术卖点，但是主要的设计、开发工作与传统软件项目无太大区别。所以对于成熟的软件开发工程师，入手区块链溯源项目没有太大难度，只是数据调用接口需要更换而已。
&emsp;&emsp;相对于传统溯源项目，区块链溯源项目对区块链工程师的需求很高。这方面的人才可以分为两种：底层区块链系统工程师和区块链应用工程师。
- 底层区块链系统工程师：负责区块链系统的搭建维护；性能提升；安全提升；访问控制和隐私保护等等。这方面的人才需求是无止境的，现有的开源区块链系统都需要大量的优化才能满足实际业务的需求。此类工程师是溯源系统能否满足实际业务需求的关键。
- 区块链应用工程师：负责开发区块链调用接口；开发基于智能合约的核心业务功能等。此类工程师是系统能否充分利用区块链技术优势的关键。